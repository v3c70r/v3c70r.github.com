<!DOCTYPE html>
<html >
    <head>
        <meta charset="UTF-8">
        <title>Triangled</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="./node_modules/jquery/dist/jquery.min.js"></script>
        <script src="./node_modules/jquery.terminal/js/jquery.mousewheel-min.js"></script>
        <script src="./node_modules/jquery.terminal/js/jquery.terminal.min.js"></script>
        <link href="./node_modules/jquery.terminal/css/jquery.terminal.css" rel="stylesheet">
        <title> V3C70R </title>
        <script>
// Quake terminal
String.prototype.strip = function(char) {
    return this.replace(new RegExp("^" + char + "*"), '').
        replace(new RegExp(char + "*$"), '');
}


$.extend_if_has = function(desc, source, array) {
    for (var i=array.length;i--;) {
        if (typeof source[array[i]] != 'undefined') {
            desc[array[i]] = source[array[i]];
        }
    }
    return desc;
};


(function($) {
    $.fn.tilda = function(eval, options) {
        if ($('body').data('tilda')) {
            return $('body').data('tilda').terminal;
        }
        this.addClass('tilda-bottom');
        options = options || {};
        eval = eval || function(command, term) {
            term.echo("you don't set eval for tilda");
        };
        var settings = {
            prompt: '$> ',
            name: 'test',
            height: 100,
            enabled: false,
            greetings: 'Quake like console',
            keypress: function(e) {
                if (e.which == 96) {
                    return false;
                }
            }
        };
        if (options) {
            $.extend(settings, options);
        }
        this.append('<div class="td"></div>');
        var self = this;
        self.terminal = this.find('.td').terminal(eval, settings);
        var focus = false;

        $(document.documentElement).keypress(function(e) {
            if (e.which == 96) {
                self.slideToggle('fast');
                self.terminal.focus(focus = !focus);
                self.terminal.attr({
                    scrollTop: self.terminal.attr("scrollHeight")
                });
                // If close to the bottom
                if($(document).height() - $(window).scrollTop() - $(window).height() < 100) {
                    if (focus){
                        $("body").animate({marginBottom: 150}, "fast")
                    }
                    else {
                        $("body").animate({marginBottom: 0}, "fast")
                    }
                    $("html, body").animate({ scrollTop: $(document).height() }, "fast");
                }
            }
        });
        $('document.body').data('tilda', this);
        this.hide();
        return self;
    };
})(jQuery);
//--------------------------------------------------------------------------
jQuery(document).ready(function($) {

    //$("div").hide();

    $('#tilda-bottom').tilda(function(command, terminal) {
        terminal.echo('you type command "' + command + '"');
        $(command).toggle("fast");
       //$("#"+command).animate({width:'toggle'},350); 
    });
});
        </script>

    </head>
    <body>
        <div id="tilda-bottom"></div>
            <canvas id="canvas"></canvas>

        <div id="nyan" class="card" z-default=1 z-hover=3>
            <img height=90 align=right src="http://cdn.nyanit.com/nyan2.gif"></img>
        </div>
        <div id="nyan" class="card" z-default=1 z-hover=3 >
            <p>I'm an empty card</p>
        </div>
        <div id="nyan" class="card" z-default=1 z-hover=3 >
            <p>I'm an empty card</p>
        </div>
        <div id="nyan" class="card" z-default=1 z-hover=3 >
            <p>I'm an empty card</p>
        </div>
        <div id="nyan" class="card" z-default=1 z-hover=3 >
            <p>I'm an empty card</p>
        </div>
        <script src="js/triangle.js"></script>
        <script src="./js/card-depth.js"></script>
    </body>
</html>
